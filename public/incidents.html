<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>StreetWise | View Incidents</title>
    <!-- CSS  -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
    <link rel="stylesheet" type="text/css" href="./style/css/reset.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="./style/css/styleC.css">
    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://use.fontawesome.com/fefb8214e6.css" media="all" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Anonymous+Pro|Asap+Condensed|Inconsolata|Nunito+Sans:300i|Rasa|Special+Elite" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./style/images/icon.png">
</head>

<body>
    <nav class="cyan darken-1" role="navigation">
        <div class="nav-wrapper container"><img src="./style/images/colors400.png" alt="private-eye logo" id="logo"><a id="logo-container" href="index.html" class="brand-logo">StreetWise</a>
            <ul class="right hide-on-med-and-down">
                <li class="homePage"><a href="/"><i class="material-icons">home</i></a></li>
                <li class="reportPage"><a href="/reportincident"><i class="material-icons">report</i></a></li>
                <li class="incidentPage"><a href="/viewincidents"><i class="material-icons">location_on</i></a></li>
            </ul>
            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
           <!--  <ul class="right hide-on-med-and-down">
                <li><a href="/">Home</a></li>
                <li><a href="/reportIncident">Report Incident</a></li>
                <li><a href="/viewincidents">View Incidents</a></li>
            </ul> -->
            <ul class="side-nav" id="mobile-demo">
                 <li><a href="/">Home</a></li>
                <li><a href="/reportIncident">Report Incident</a></li>
                <li><a href="/viewincidents">View Incidents</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
   <!--  <h1 class="header center col s12 blue-grey-text">View. Report. Get StreetWise.</h1>

    <div class="col s12" id="incidentsHeader">
    

    <p id="incidentsPara">Below you will see a table of all harassment incidents reported to StreetWise from most recent to oldest. While it is unfortunate these incidents happen so often, it is powerful to see so many people sharing their stories to help others become better informed of their surroundings.</p>


    </div>


      <table class="responsive striped centered col s12" id="incidentTable">
        <thead>
          <tr>
              <th>Harassment Type</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Date &amp; Time </th>
              <th>Incident Description</th>
          </tr>
        </thead>

        <tbody>
          
        </tbody>
      </table> -->



        <h1 class="header center col s12 blue-grey-text">View. Report. Get StreetWise.</h1>
        <div class="col s12" id="incidentsHeader">
            <p id="incidentsPara">Below you will see a table of all harassment incidents reported to StreetWise from most recent to oldest. While it is unfortunate these incidents happen so often, it is powerful to see so many people sharing their stories to help others become better informed of their surroundings.</p>
        </div>
        <table class="responsive striped centered col s12" id="incidentTable">
            <thead>
                <tr>
                    <th>Harassment Type</th>
                    <th>Address</th>
                    <th>Date &amp; Time </th>
                    <th>Incident Description</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
      
    </div>
    <footer class="page-footer cyan darken-1">
        <div class="container footer-area">
            <div class="row">
                <h5>Connect with StreetWise:</h5>
                <div class="col s12 contactArea">
                    <a href="#"><i class="contact-icons fa fa-envelope-o" aria-hidden="true"></i></a>
                    <a href="#"><i class="contact-icons fa fa-github" aria-hidden="true"></i></a>
                    <a href="#"><i class="contact-icons fa fa-twitter-square" aria-hidden="true"></i></a>
                    <a href="#"><i class="contact-icons fa fa-facebook-square" aria-hidden="true"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container center cyan-text text-darken-4">
                All rights reserved by StreetWise 2017
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://use.fontawesome.com/fefb8214e6.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>
    <script type="text/javascript">
    $(".button-collapse").sideNav();
    $(document).ready(function() {


                var queryURL = window.location.origin + "/api/incidents"
                console.log(queryURL);
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).done(function(response) {
                    console.log(response);

                    for (var i = 0; i < response.length; i++) {
                        console.log(response[i]);
                        var type = response[i].HarassmentType;
                        // var lat = parseFloat(response[i].Latitude);
                        // var long = parseFloat(response[i].Longitude);
                        var address = response[i].Address;
                        var dateTime = response[i].DateTime;
                        var desc = response[i].Description;
                        // console.log(lat);
                        // console.log(lng);
                        // Add each train's data into the table
                        $("#incidentTable > tbody").append("<tr><td>" + type + "</td><td>" + address + "</td><td>" + dateTime + "</td><td>" + desc + "</td></tr>");


                    }


                });



                });
    </script>
</body>

</html>